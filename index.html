<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ASR Cinematic 2026</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@300&display=swap');

        body {
            background-color: #000;
            color: #e0e0e0;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            font-family: 'Playfair Display', serif;
            position: relative;
        }

        canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none; opacity: 0.45;
        }

        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, #000 135%);
            pointer-events: none; z-index: 2;
        }

        /* --- OPENING STYLES --- */
        #opening-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 20;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .opening-text {
            font-family: 'Cinzel', serif;
            font-weight: 700;
            color: #d4af37;
            text-shadow: 0 0 25px rgba(212, 175, 55, 0.6);
            text-align: center;
            opacity: 0;
            transform: scale(0.85);
            transition: all 1.8s ease;
            position: absolute;
            width: 100%;
        }

        .text-asr { font-size: 4.5rem; letter-spacing: 12px; }
        .text-sub { font-size: 1rem; letter-spacing: 6px; color: #888; font-family: 'Montserrat', sans-serif; display: block; margin-top: 15px;}
        .text-hny { font-size: 2.8rem; letter-spacing: 4px; color: #fff; line-height: 1.2; }
        .text-year { font-size: 5.5rem; color: #d4af37; display: block; margin-top: 10px; }

        .visible { opacity: 1 !important; transform: scale(1) !important; }

        /* --- POEM STYLES --- */
        #poem-container {
            position: relative;
            z-index: 10;
            height: 100vh;
            width: 100%; max-width: 600px; margin: 0 auto;
            overflow-y: auto;
            padding: 50vh 25px; 
            box-sizing: border-box;
            opacity: 0;
            scroll-behavior: smooth;
            scrollbar-width: none; 
            transition: opacity 2s ease;
        }
        #poem-container::-webkit-scrollbar { display: none; }

        .line-item {
            text-align: center; margin-bottom: 70px;
            opacity: 0.1; transition: all 1s ease;
            transform: scale(0.9); filter: blur(5px);
        }

        .line-item.active {
            opacity: 1; transform: scale(1.1); filter: blur(0);
        }

        .text-en {
            font-size: 1.6rem; color: #fff; margin-bottom: 12px;
            text-shadow: 0 2px 15px rgba(0,0,0,1);
        }
        
        .line-item.active .text-en {
            color: #d4af37; text-shadow: 0 0 35px rgba(212, 175, 55, 0.6);
        }

        .text-id {
            font-family: 'Montserrat', sans-serif; font-size: 0.95rem;
            color: #777; font-style: italic; letter-spacing: 1px;
        }
        .line-item.active .text-id { color: #bbb; }

        /* --- START OVERLAY --- */
        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #050505; z-index: 100;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        #start-btn {
            padding: 22px 45px;
            font-family: 'Cinzel', serif; font-size: 1.1rem; font-weight: bold;
            background: #d4af37; color: #000; border: none; border-radius: 4px;
            cursor: pointer; letter-spacing: 2px;
            transition: 0.4s;
        }
        #start-btn:hover:not(:disabled) { background: #fff; box-shadow: 0 0 30px #fff; }
        #start-btn:disabled { background: #222; color: #444; cursor: wait; }
        #loading-text { margin-top: 25px; color: #d4af37; font-size: 0.85rem; font-family: 'Montserrat'; font-style: italic;}

    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="backsound.mp3" type="audio/mpeg">
    </audio>

    <canvas id="fireworks"></canvas>
    <div class="vignette"></div>

    <div id="opening-container">
        <div id="slide-asr" class="opening-text">
            <span class="text-asr">ASR</span>
            <span class="text-sub">PRESENTS</span>
        </div>
        <div id="slide-hny" class="opening-text">
            <span class="text-hny">HAPPY NEW YEAR</span>
            <span class="text-year">2026</span>
        </div>
    </div>

    <div id="start-overlay">
        <button id="start-btn" onclick="init()">START EXPERIENCE</button>
        <div id="loading-text">Pastikan file 'backsound.mp3' berada di folder yang sama</div>
    </div>

    <div id="poem-container"></div>

    <script>
        // =========================================
        // !!! MASUKKAN API KEY ELEVENLABS KAMU !!!
        const API_KEY = "sk_74063a0cd3bdfef66e982f1942ec5771560aea0063ac0fdb";
        // =========================================
        
        const VOICE_ID = "onwK4e9ZLuTAKqWW03F9"; // Daniel (Deep Voice)

        const poemData = [
            { en: "Let the night swallow our remaining breath.", id: "Biarkan malam ini menelan sisa napas kita." },
            { en: "Do not turn on the lights.", id: "Jangan nyalakan lampu." },
            { en: "We are comfortable in the blur.", id: "Kita lebih nyaman di dalam samar." },
            { en: "You and I know...", id: "Kau dan aku tahu..." },
            { en: "We seek no bright and easy path.", id: "Kita tak mencari jalan yang terang dan mudah." },
            { en: "We fell in love with the misleading road.", id: "Kita jatuh cinta pada jalan yang menyesatkan." },
            { en: "With the fatigue that bites the bones,", id: "Pada lelah yang menggigit tulang," },
            { en: "With the longing that strangles the neck...", id: "Pada rindu yang mencekik leher..." },
            { en: "Yet never kills.", id: "Namun tak pernah membunuh." },
            { en: "Just admit it.", id: "Akui saja." },
            { en: "You enjoy the pain of waiting.", id: "Kau menikmati rasa sakit menunggu ini." },
            { en: "You enjoy every heartbeat while gambling with fate.", id: "Kau nikmati detak jantung saat bertaruh nasib." },
            { en: "It is not a burden.", id: "Itu bukan beban." },
            { en: "It is desire.", id: "Itu gairah." },
            { en: "Don't look back.", id: "Jangan menoleh lagi." },
            { en: "What's behind is gone. Dried up.", id: "Yang di belakang sudah habis. Kering." },
            { en: "Look at him standing at the edge of the mist.", id: "Lihat dia berdiri di ujung kabut itu." },
            { en: "A stranger. Cold. Arrogant. Tempting.", id: "Sosok asing. Dingin. Angkuh. Menggoda." },
            { en: "He promises no light.", id: "Dia tak menjanjikan cahaya." },
            { en: "He offers a riddle that makes you hunger.", id: "Dia menawarkan teka-teki yang membuatmu lapar." },
            { en: "And we will come to him.", id: "Dan kita akan datang padanya." },
            { en: "Not to knock politely,", id: "Bukan untuk mengetuk sopan," },
            { en: "But to break in and claim him.", id: "Tapi untuk mendobrak dan memilikinya." },
            { en: "Until the end.", id: "Sampai habis." }
        ];

        let audioBlobs = [];
        const bgMusic = document.getElementById('bg-music');
        const container = document.getElementById('poem-container');
        const startBtn = document.getElementById('start-btn');
        const loadingText = document.getElementById('loading-text');

        poemData.forEach((data, index) => {
            const div = document.createElement('div');
            div.className = 'line-item';
            div.id = `line-${index}`;
            div.innerHTML = `<div class="text-en">${data.en}</div><div class="text-id">${data.id}</div>`;
            container.appendChild(div);
        });

        async function init() {
            if (API_KEY.includes("PASTE")) { alert("Isi API KEY dulu di kode!"); return; }
            
            startBtn.disabled = true;
            loadingText.innerText = "Generating Narration AI...";

            // Membuka jalur audio browser
            bgMusic.volume = 0;
            bgMusic.play().then(() => bgMusic.pause());

            try {
                for (let i = 0; i < poemData.length; i++) {
                    loadingText.innerText = `Loading Voice ${i+1}/${poemData.length}...`;
                    const res = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
                        method: "POST",
                        headers: { "xi-api-key": API_KEY, "Content-Type": "application/json" },
                        body: JSON.stringify({
                            text: poemData[i].en,
                            model_id: "eleven_multilingual_v2",
                            voice_settings: { stability: 0.5, similarity_boost: 0.8 }
                        })
                    });
                    const blob = await res.blob();
                    audioBlobs.push(URL.createObjectURL(blob));
                }

                document.getElementById('start-overlay').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('start-overlay').style.display = 'none';
                    if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen();
                    startShow();
                }, 800);
            } catch (e) {
                alert("Error: Kuota API habis atau file backsound tidak ditemukan.");
                startBtn.disabled = false;
            }
        }

        function startShow() {
            startFireworks();
            bgMusic.volume = 0.2; // VOLUME DISESUAIKAN (20%)
            bgMusic.currentTime = 0;
            bgMusic.play();

            const op = document.getElementById('opening-container');
            op.style.opacity = 1;

            // Slide ASR
            setTimeout(() => document.getElementById('slide-asr').classList.add('visible'), 500);
            
            // Slide HNY
            setTimeout(() => {
                document.getElementById('slide-asr').classList.remove('visible');
                setTimeout(() => document.getElementById('slide-hny').classList.add('visible'), 1200);
            }, 4500);

            // Masuk Puisi
            setTimeout(() => {
                document.getElementById('slide-hny').classList.remove('visible');
                setTimeout(() => {
                    op.style.display = 'none';
                    container.style.opacity = 1;
                    playSequence(0);
                }, 1500);
            }, 9500);
        }

        function playSequence(index) {
            if (index >= poemData.length) return;

            document.querySelectorAll('.line-item').forEach(el => el.classList.remove('active'));
            const line = document.getElementById(`line-${index}`);
            line.classList.add('active');
            line.scrollIntoView({ behavior: "smooth", block: "center" });

            const audio = new Audio(audioBlobs[index]);
            audio.play();
            audio.onended = () => {
                setTimeout(() => playSequence(index + 1), 1000);
            };
        }

        function startFireworks() {
            const canvas = document.getElementById('fireworks');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            let p = [];
            function animate() {
                ctx.fillStyle = 'rgba(0,0,0,0.15)'; ctx.fillRect(0,0,canvas.width,canvas.height);
                if (Math.random() < 0.04) {
                    const x = Math.random()*canvas.width, y = Math.random()*canvas.height*0.4;
                    for(let i=0; i<30; i++) p.push({
                        x, y, vx: (Math.random()-0.5)*5, vy: (Math.random()-0.5)*5,
                        a: 1, c: `hsl(${35+Math.random()*15}, 100%, 60%)`
                    });
                }
                p.forEach((part, i) => {
                    part.x += part.vx; part.y += part.vy; part.a -= 0.015; part.vy += 0.02;
                    ctx.globalAlpha = part.a; ctx.fillStyle = part.c;
                    ctx.beginPath(); ctx.arc(part.x, part.y, 1.2, 0, Math.PI*2); ctx.fill();
                    if(part.a <= 0) p.splice(i, 1);
                });
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>
